---
layout:     post
title:      Python API
subtitle:   Python
date:       2025-01-07
author:     Treaseven
header-img: img/bg20.jpg
catalog: true
tags:
    - python api
---

```hasattr()```: 接受两个参数(第一个是对象，第二个是要检查的属性名),返回一个布尔值

```
multiprocessing库
Process类
p = Process(target=func, args=(arg1,)) # 创建进程
p.start() # 启动进程
p.join() # 等待进程结束
p.terminate() # 终止进程
p.is_alive() # 检查进程是否在运行

Pool类
pool = Pool(process=4) # 创建进程池
pool.map(func, iterable) # 并行映射
pool.apply_async(func, args) # 异步执行
pool.close() # 关闭进程池
pool.join() # 等待所有进程完成

进程间通信工具
from multiprocessing import Queue # Queue用于进程间数据传递
q = Queue()
q.put(item) # 放入数据
q.get() # 获取数据

from multiprocessing import Pipe # Pipe用于两个进程间通信
parent_conn, child_conn = Pipe()
parent_conn.send(data) # 发送数据
child_conn.recv() # 接收数据

同步原语
from multiprocessing import Lock # Lock用于进程同步
lock = Lock()
lock.acquire() # 获取锁
lock.release() # 释放锁

from multiprocessing import Event # Event用于进程间事件通知
event = Event()
event.set() # 设置事件
event.clear() # 清除事件
event.wait() # 等待事件

共享内存
from multiprocessing import Value, Array
num = Value('i', 0) # 共享整数
arr = Array('i', range(10)) # 共享整数数组

常用属性和函数
import multiprocessing as mp
mp.cpu_count() # 获取CPU核心数
current = mp.current_process() # 当前进程
current.name # 获取进程名称
current.pid # 获取进程id
mp.set_start_method('spawn') #设置启动方法 ‘fork’、‘forkserver’
```

```
python的装饰器是一种在不修改原始函数或类定义的情况下，增加额外功能的方法
@functools.wraps(func) 保留原函数的元信息
*args 和 **kwargs 是python中用于处理可变数量参数的特殊语法
*args: 用于收集位置参数到一个元组中
**kwargs: 用于收集关键字参数到一个字典中
@abstractmethod: python中的一个装饰器，用于声明抽象方法，来自abc(Abstract Base Classes)模块，用于定义接口或抽象类中的抽象方法，这些方法必须在子类中实现
@staticmethod: python中的一个装饰器，用于定义静态方法，是一种特殊的方法，它不需要访问类或实例的属性，可以直接通过类名调用
@classmethod: python中的一个装饰器，用于定义类方法，类方法的第一个参数是类本身(通常命名为cls)，而不是实例(self)，使得方法可以访问和修改类的状态，而不需要创建类的实例
from memory_profile import profile @profile 分析函数的内存使用
from memory_profiler import memory_usage 实时内存监控功能
from scipy import stats  stats.trim_mean(a, proportiontocut, axis=0) 用于计算修剪平均值，会去除数据两端的极端值
@property: python中的一个装饰器，可以让一个方法像属性一样被访问，同时可以添加额外的逻辑控制
```

```
*是解包操作符，它可以将一个可迭代对象(如列表、元组)解包成单独的参数
```

```
psutil.cpu_count: 用于获取系统的CPU核心数
ast.literal_eval: 用于将字符串形式的Python字面量转换成对应的Python对象
eval: 可以执行任意Python代码
json.dumps: 用于将Python对象转换为JSON格式字符串的函数，序列化数据，便于数据传输和存储
warnings.filterwarnings: 控制和过滤Python警告信息的显示，常见的action参数(error:将警告转换为异常，ignore:忽略警告，always:总是显示警告，default:使用默认行为，module:为每个模块显示一次，once:只显示一次特定警告)
globals: Python内置函数，它返回当前全局变量的字典
os.path.isfile: 用来判断一个路径是否为文件的函数，返回一个布尔值，如果路径指向一个常规文件，返回True,如果是目录、符号链接或不存在，返回FALSE
urlretrieve: 用于从网络下载文件的函数
列表推导式: [表达式 for 变量 in 可迭代对象 if 条件]
pickle.dump: 将对象转换为字节流并写入文件
```

```
signal.signal(signal.SIGTERM, signal_handler) 用于处理系统信号的函数，允许设置特定信号的处理程序
常用的信号类型：SIGINT(中断信号)、SIGTERM(终止信号)、SIGALRM(定时器信号)、SIGCHLD(子进程状态改变)、SIGUSR1/SIGUSR2(用户自定义信号)
```

```
dir(): 用于返回对象的所有属性和方法的列表
setattr和getattr: 用于动态地设置和获取对象的属性
```

```
from onnxconverter_common.container import CommonSklearnModelContainer 专门用于处理scikit-learn模型到ONNX的转换过程，容器可以存储模型的元数据、管理变量名和作用域，跟踪模型的计算图，处理中间表示
from onnxconverter_common.topology import Topology as ONNXTopology ONNX转换器中的一个核心类，用于管理和构建ONNX模型的计算图拓扑结构，管理计算图结构、节点管理、拓扑信息处理
from onnxconverter_common.registration.get_converter 用于获取特定模型或操作符的ONNX转换器，查找合适的转换器，返回注册过的转换器实例，处理转换器的依赖关系
```